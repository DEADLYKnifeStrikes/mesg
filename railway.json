{
  "version": 2,
  "services": {
    "api": {
      "source": ".",
      "nixpacks": {
        "buildCommand": "npm ci && npm run -w packages/api prisma:generate && npm run -w packages/api build",
        "startCommand": "npm run -w packages/api prisma:deploy && npm run -w packages/api start:prod"
      },
      "healthcheck": {
        "path": "/",
        "timeout": 300
      },
      "regions": ["us-west1"]
    },
    "web": {
      "source": ".",
      "nixpacks": {
        "buildCommand": "npm ci && npm run -w packages/web build",
        "startCommand": "npm run -w packages/web preview -- --host 0.0.0.0 --port $PORT"
      },
      "healthcheck": {
        "path": "/",
        "timeout": 300
      },
      "regions": ["us-west1"]
    }
  }
}
